<Window x:Class="ollamidesk.RAG.Diagnostics.RagDiagnosticWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RAG Diagnostics Tool" Height="600" Width="800"
        MinWidth="600" MinHeight="400"
        Style="{StaticResource {x:Type Window}}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Controls -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
            <Button x:Name="StartButton" Content="Start Diagnostics" Click="StartButton_Click" Width="120" Margin="0,0,10,0" Style="{StaticResource {x:Type Button}}"/>
            <Button x:Name="StopButton" Content="Stop Diagnostics" Click="StopButton_Click" Width="120" Margin="0,0,10,0" IsEnabled="False" Style="{StaticResource {x:Type Button}}"/>
            <ComboBox x:Name="LevelComboBox" Width="120" Margin="0,0,10,0" Style="{StaticResource {x:Type ComboBox}}">
                <ComboBoxItem Content="Debug" IsSelected="True"/>
                <ComboBoxItem Content="Info"/>
                <ComboBoxItem Content="Warning"/>
                <ComboBoxItem Content="Error"/>
                <ComboBoxItem Content="Critical"/>
            </ComboBox>
            <Button x:Name="ClearButton" Content="Clear Log" Click="ClearButton_Click" Width="80" Margin="0,0,10,0" Style="{StaticResource {x:Type Button}}"/>
            <Button x:Name="SaveButton" Content="Save Log" Click="SaveButton_Click" Width="80" Style="{StaticResource {x:Type Button}}"/>
        </StackPanel>

        <!-- Log Viewer -->
        <TabControl Grid.Row="1" Margin="10" Style="{StaticResource {x:Type TabControl}}">
            <TabItem Header="Logs" Style="{StaticResource {x:Type TabItem}}">
                <TextBox x:Name="LogTextBox"
                         IsReadOnly="True" 
                         VerticalScrollBarVisibility="Auto" 
                         HorizontalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="12"
                         Style="{StaticResource {x:Type TextBox}}"/>
            </TabItem>
            <TabItem Header="Performance" Style="{StaticResource {x:Type TabItem}}">
                <TextBox x:Name="PerformanceTextBox"
                         IsReadOnly="True"
                         VerticalScrollBarVisibility="Auto"
                         HorizontalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="12"
                         Style="{StaticResource {x:Type TextBox}}"/>
            </TabItem>
            <TabItem Header="Tests" Style="{StaticResource {x:Type TabItem}}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Margin="10">
                        <TextBlock Text="RAG Diagnostic Tests" FontWeight="Bold" Margin="0,0,0,10" Style="{StaticResource {x:Type TextBlock}}"/>

                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button x:Name="TestEmbeddingButton" Content="ðŸ§ª Test Embedding API"
                                    Click="TestEmbeddingButton_Click" Width="Auto" MinWidth="180" Margin="0,0,10,0" Style="{StaticResource {x:Type Button}}" Padding="8,4"/>
                            <TextBlock x:Name="EmbeddingStatusText" VerticalAlignment="Center" Style="{StaticResource {x:Type TextBlock}}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button x:Name="TestModelButton" Content="ðŸ§  Test Ollama API"
                                    Click="TestModelButton_Click" Width="Auto" MinWidth="180" Margin="0,0,10,0" Style="{StaticResource {x:Type Button}}" Padding="8,4"/>
                            <TextBlock x:Name="ModelStatusText" VerticalAlignment="Center" Style="{StaticResource {x:Type TextBlock}}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button x:Name="TestVectorStoreButton" Content="ðŸ’¾ Test Vector Store"
                                    Click="TestVectorStoreButton_Click" Width="Auto" MinWidth="180" Margin="0,0,10,0" Style="{StaticResource {x:Type Button}}" Padding="8,4"/>
                            <TextBlock x:Name="VectorStoreStatusText" VerticalAlignment="Center" Style="{StaticResource {x:Type TextBlock}}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button x:Name="TestChunkingButton" Content="ðŸ“„ Test Document Chunking"
                                    Click="TestChunkingButton_Click" Width="Auto" MinWidth="180" Margin="0,0,10,0" Style="{StaticResource {x:Type Button}}" Padding="8,4"/>
                            <TextBlock x:Name="ChunkingStatusText" VerticalAlignment="Center" Style="{StaticResource {x:Type TextBlock}}"/>
                        </StackPanel>
                    </StackPanel>

                    <TextBox Grid.Row="1" x:Name="TestResultsTextBox"
                             IsReadOnly="True"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Auto"
                             FontFamily="Consolas"
                             FontSize="12"
                             Margin="10"
                             Style="{StaticResource {x:Type TextBox}}"/>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Style="{StaticResource {x:Type StatusBar}}">
            <TextBlock x:Name="StatusText" Text="Ready" Style="{StaticResource {x:Type TextBlock}}"/>
        </StatusBar>
    </Grid>
</Window>